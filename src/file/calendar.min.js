/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/@slventures/calendar@0.2.4-0.0.6/dist/calendar.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t,e){if("function"==typeof define&&define.amd)define(["jquery-plugincreator","lodash/lang/isFunction","lodash/string/template","lodash/collection/each"],e);else if("undefined"!=typeof exports)e(require("jquery-plugincreator"),require("lodash/lang/isFunction"),require("lodash/string/template"),require("lodash/collection/each"));else{e(t.jqueryPlugincreator,t.isFunction,t.template,t.each),t.calendar={}}}(this,(function(t,e,a,i){"use strict";var n=l(t),s=l(e),o=l(a),r=l(i);function l(t){return t&&t.__esModule?t:{default:t}}function h(t){var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-e.getTime())/864e5+e.getDay()+1)/7)}function d(t){var e=t.getMonth()+1;return e<10?"0"+e:e}function c(t){var e=$.makeArray(arguments).slice(1);return t.replace(/{(\d+)}/g,(function(t,a){return void 0!==e[a]?e[a]:t}))}function p(t,e){e=e||2;for(var a=""+t;a.length<e;)a="0"+a;return a}var u={first_day:2,holidays:{"01-01":"New Year's Day","01+3*1":"Birthday of Dr. Martin Luther King, Jr.","02+3*1":"Washington's Birthday","05-1*1":"Memorial Day","04-07":"Independence Day","09+1*1":"Labor Day","10+2*1":"Columbus Day","11-11":"Veterans Day","11+4*4":"Thanksgiving Day","25-12":"Christmas"}},m={error_noview:"Calendar: View {0} not found",error_dateformat:'Calendar: Wrong date format {0}. Should be either "now" or "yyyy-mm-dd"',error_loadurl:"Calendar: Event URL is not set",error_where:'Calendar: Wrong navigation direction {0}. Can be only "next" or "prev" or "today"',error_timedevide:"Calendar: Time split parameter should divide 60 without decimals. Something like 10, 15, 30",no_events_in_day:"No events in this day.",title_year:"{0}",title_month:"{0} {1}",title_week:"week {0} of {1}",title_day:"{0} {1} {2}, {3}",week:"Week {0}",all_day:"All day",time:"Time",events:"Events",before_time:"Ends before timeline",after_time:"Starts after timeline",m0:"January",m1:"February",m2:"March",m3:"April",m4:"May",m5:"June",m6:"July",m7:"August",m8:"September",m9:"October",m10:"November",m11:"December",ms0:"Jan",ms1:"Feb",ms2:"Mar",ms3:"Apr",ms4:"May",ms5:"Jun",ms6:"Jul",ms7:"Aug",ms8:"Sep",ms9:"Oct",ms10:"Nov",ms11:"Dec",d0:"Sunday",d1:"Monday",d2:"Tuesday",d3:"Wednesday",d4:"Thursday",d5:"Friday",d6:"Saturday"},g="";try{"object"==$.type(window.jstz)&&"function"==$.type(jstz.determine)&&(g=jstz.determine().name(),"string"!==$.type(g)&&(g=""))}catch(t){}function y(t,e){var a,i,n;for(i in n=t,a=t.indexOf("?")<0?"?":"&",e)n+=a+i+"="+encodeURIComponent(e[i]),a="&";return n}function f(t,e){var a=null!=t.options[e]?t.options[e]:null,i=null!=t.locale[e]?t.locale[e]:null;if("holidays"==e&&t.options.merge_holidays){var n={};return $.extend(!0,n,i||u.holidays),a&&$.extend(!0,n,a),n}return null!=a?a:null!=i?i:u[e]}function v(t,e){var a=[],i=f(t,"holidays");for(var n in i)a.push(n+":"+i[n]);if(a.push(e),(a=a.join("|"))in v.cache)return v.cache[a];var s=[];return $.each(i,(function(t,a){var i=null,n=null,o=!1;if($.each(t.split(">"),(function(a,s){var r,l=null;if(r=/^(\d\d)-(\d\d)$/.exec(s))l=new Date(e,parseInt(r[2],10)-1,parseInt(r[1],10));else if(r=/^(\d\d)-(\d\d)-(\d\d\d\d)$/.exec(s))parseInt(r[3],10)==e&&(l=new Date(e,parseInt(r[2],10)-1,parseInt(r[1],10)));else if(r=/^easter(([+\-])(\d+))?$/.exec(s))l=function(t,e){var a=t%19,i=Math.floor(t/100),n=t%100,s=Math.floor(i/4),o=i%4,r=Math.floor((i+8)/25),l=Math.floor((i-r+1)/3),h=(19*a+i-s-l+15)%30,d=Math.floor(n/4),c=(32+2*o+2*d-h-n%4)%7,p=Math.floor((a+11*h+22*c)/451),u=h+c+7*p+114,m=Math.floor(u/31)-1;return new Date(t,m,u%31+1+(e||0),0,0,0)}(e,r[1]?parseInt(r[1],10):0);else if(r=/^(\d\d)([+\-])([1-5])\*([0-6])$/.exec(s)){var h=parseInt(r[1],10)-1,d=r[2],c=parseInt(r[3]),p=parseInt(r[4]);switch(d){case"+":for(var u=new Date(e,h,-6);u.getDay()!=p;)u=new Date(u.getFullYear(),u.getMonth(),u.getDate()+1);l=new Date(u.getFullYear(),u.getMonth(),u.getDate()+7*c);break;case"-":for(u=new Date(e,h+1,7);u.getDay()!=p;)u=new Date(u.getFullYear(),u.getMonth(),u.getDate()-1);l=new Date(u.getFullYear(),u.getMonth(),u.getDate()-7*c)}}if(!l)return w("Unknown holiday: "+t),o=!0,!1;switch(a){case 0:i=l;break;case 1:if(l.getTime()<=i.getTime())return w("Unknown holiday: "+t),o=!0,!1;n=l;break;default:return w("Unknown holiday: "+t),o=!0,!1}})),!o){var r=[];if(n)for(var l=new Date(i.getTime());l.getTime()<=n.getTime();l.setDate(l.getDate()+1))r.push(new Date(l.getTime()));else r.push(i);s.push({name:a,days:r})}})),v.cache[a]=s,v.cache[a]}function w(t){"object"==$.type(window.console)&&"function"==$.type(window.console.warn)&&window.console.warn("[Calendar] "+t)}v.cache={};var _={init:function(){this.options.position=$.extend(!0,{},{start:new Date,end:new Date},this.options.position||{}),this.setLanguage(this.options.language),this.context.css("width",this.options.width).addClass("cal-context"),this.view()},setOptions:function(t){$.extend(this.options,t),"language"in t&&this.setLanguage(t.language)},setLanguage:function(t){window.calendar_languages&&t in window.calendar_languages?(this.locale=$.extend(!0,{},m,calendar_languages[t]),this.options.language=t):(this.locale=m,delete this.options.language)},_render:function(){this.context.html(""),this._loadTemplate(this.options.view),this.stop_cycling=!1;var t={};t.cal=this,t.day=1,1==f(this,"first_day")?t.days_name=[this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6,this.locale.d0]:t.days_name=[this.locale.d0,this.locale.d1,this.locale.d2,this.locale.d3,this.locale.d4,this.locale.d5,this.locale.d6];var e=parseInt(this.options.position.start.getTime()),a=parseInt(this.options.position.end.getTime());switch(t.events=this.getEventsBetween(e,a),this.options.view){case"month":break;case"week":case"day":this._calculate_hour_minutes(t)}t.start=new Date(this.options.position.start.getTime()),t.lang=this.locale,this.context.append(this.options.templates[this.options.view](t)),this._update()},_calculate_hour_minutes:function(t){var e=this,a=parseInt(this.options.time_split),i=60/a,n=Math.min(i,1);(i>=1&&i%1!=0||i<1&&1440/a%1!=0)&&$.error(this.locale.error_timedevide);var s=this.options.time_start.split(":"),o=this.options.time_end.split(":");t.hours=(parseInt(o[0])-parseInt(s[0]))*n;var r=t.hours*i-parseInt(s[1])/a,l=6e4*a,h=new Date(this.options.position.start.getTime());h.setHours(s[0]),h.setMinutes(s[1]);var d=new Date(this.options.position.end.getTime());d.setHours(o[0]),d.setMinutes(o[1]),t.all_day=[],t.by_hour=[],t.after_time=[],t.before_time=[],$.each(t.events,(function(a,i){var n=new Date(parseInt(i.start)),s=new Date(parseInt(i.end));if(i.start_hour=p(n.getHours().toString())+":"+p(n.getMinutes().toString()),i.end_hour=p(s.getHours().toString())+":"+p(s.getMinutes().toString()),i.start<h.getTime()&&(w(1),i.start_hour=n.getDate()+" "+e.locale["ms"+n.getMonth()]+" "+i.start_hour),i.end>d.getTime()&&(w(1),i.end_hour=s.getDate()+" "+e.locale["ms"+s.getMonth()]+" "+i.end_hour),i.start<h.getTime()&&i.end>d.getTime())t.all_day.push(i);else if(i.end<h.getTime())t.before_time.push(i);else if(i.start>d.getTime())t.after_time.push(i);else{var o=h.getTime()-i.start;i.top=o>=0?0:Math.abs(o)/l;var c=Math.abs(r-i.top),u=(i.end-i.start)/l;o>=0&&(u=(i.end-h.getTime())/l),i.lines=u,u>c&&(i.lines=c),t.by_hour.push(i)}}))},_hour_min:function(t){var e=this.options.time_start.split(":"),a=parseInt(this.options.time_split),i=60/a;return 0==t?i-parseInt(e[1])/a:i},_hour:function(t,e){var a=this.options.time_start.split(":"),i=parseInt(this.options.time_split),n=""+(parseInt(a[0])+t*Math.max(i/60,1)),s=""+(i*e+(0==t?parseInt(a[1]):0));return p(n)+":"+p(s)},_week:function(t){this._loadTemplate("week-days");var e={},a=parseInt(this.options.position.start.getTime()),i=parseInt(this.options.position.end.getTime()),n=[],s=f(this,"first_day");return $.each(this.getEventsBetween(a,i),(function(t,e){e.start_day=new Date(parseInt(e.start)).getDay(),1==s&&(e.start_day=(e.start_day+6)%7),e.end-e.start<=864e5?e.days=1:e.days=(e.end-e.start)/864e5,e.start<a&&(e.days=e.days-(a-e.start)/864e5,e.start_day=0),e.days=Math.ceil(e.days),e.start_day+e.days>7&&(e.days=7-e.start_day),n.push(e)})),e.events=n,e.cal=this,this.options.templates["week-days"](e)},_month:function(t){this._loadTemplate("year-month");var e={cal:this},a=t+1;e.data_day=this.options.position.start.getFullYear()+"-"+(a<10?"0"+a:a)+"-01",e.month_name=this.locale["m"+t];var i=new Date(this.options.position.start.getFullYear(),t,1,0,0,0);return e.start=parseInt(i.getTime()),e.end=parseInt(new Date(this.options.position.start.getFullYear(),t+1,1,0,0,0).getTime()),e.events=this.getEventsBetween(e.start,e.end),this.options.templates["year-month"](e)},_day:function(t,e){this._loadTemplate("month-day");var a={tooltip:"",cal:this},i=this.options.classes.months.outmonth,n=this.options.position.start.getDay();2==f(this,"first_day")?n++:n=0==n?7:n,e=e-n+1;var s=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),e,0,0,0);e>0&&(i=this.options.classes.months.inmonth);var o=new Date(this.options.position.end.getTime()-1).getDate();(e+1>o&&(this.stop_cycling=!0),e>o&&(e-=o,i=this.options.classes.months.outmonth),i=$.trim(i+" "+this._getDayClass("months",s)),e<=0)&&(e=new Date(this.options.position.start.getFullYear(),this.options.position.start.getMonth(),0).getDate()-Math.abs(e),i+=" cal-month-first-row");var r=this._getHoliday(s);return!1!==r&&(a.tooltip=r),a.data_day=s.getFullYear()+"-"+d(s)+"-"+(e<10?"0"+e:e),a.cls=i,a.day=e,a.start=parseInt(s.getTime()),a.end=parseInt(a.start+864e5),a.events=this.getEventsBetween(a.start,a.end),this.options.templates["month-day"](a)},_getHoliday:function(t){var e=!1;return $.each(v(this,t.getFullYear()),(function(){var a=!1;if($.each(this.days,(function(){if(this.toDateString()==t.toDateString())return a=!0,!1})),a)return e=this.name,!1})),e},_getHolidayName:function(t){var e=this._getHoliday(t);return!1===e?"":e},_getDayClass:function(t,e){var a=this,i=function(e,i){var n;"string"==typeof(n=a.options.classes&&t in a.options.classes&&e in a.options.classes[t]?a.options.classes[t][e]:"")&&n.length&&i.push(n)},n=[];switch(e.toDateString()==(new Date).toDateString()&&i("today",n),!1!==this._getHoliday(e)&&i("holidays",n),e.getDay()){case 0:i("sunday",n);break;case 6:i("saturday",n)}return i(e.toDateString(),n),n.join(" ")},view:function(t){if(t){if(!this.options.views[t].enable)return;this.options.view=t}this._init_position(),this._loadEvents(),this._render(),this.options.onAfterViewLoad.call(this,this.options.view)},navigate:function(t,e){var a,i=$.extend({},this.options.position);if("next"==t)switch(this.options.view){case"year":i.start.setFullYear(this.options.position.start.getFullYear()+1);break;case"month":i.start.setMonth(this.options.position.start.getMonth()+1);break;case"week":i.start.setDate(this.options.position.start.getDate()+7);break;case"day":i.start.setDate(this.options.position.start.getDate()+1)}else if("prev"==t)switch(this.options.view){case"year":i.start.setFullYear(this.options.position.start.getFullYear()-1);break;case"month":i.start.setMonth(this.options.position.start.getMonth()-1);break;case"week":i.start.setDate(this.options.position.start.getDate()-7);break;case"day":i.start.setDate(this.options.position.start.getDate()-1)}else"today"==t?i.start.setTime((new Date).getTime()):$.error(c(this.locale.error_where,t));this.options.day=i.start.getFullYear()+"-"+d(i.start)+"-"+((a=(a=i.start).getDate())<10?"0"+a:a),this.view(),(0,s.default)(e)&&e()},_init_position:function(){var t,e,a;if("now"==this.options.day){var i=new Date;t=i.getFullYear(),e=i.getMonth(),a=i.getDate()}else if(this.options.day.match(/^\d{4}-\d{2}-\d{2}$/g)){var n=this.options.day.split("-");t=parseInt(n[0],10),e=parseInt(n[1],10)-1,a=parseInt(n[2],10)}else $.error(c(this.locale.error_dateformat,this.options.day));switch(this.options.view){case"year":this.options.position.start.setTime(new Date(t,0,1).getTime()),this.options.position.end.setTime(new Date(t+1,0,1).getTime());break;case"month":this.options.position.start.setTime(new Date(t,e,1).getTime()),this.options.position.end.setTime(new Date(t,e+1,1).getTime());break;case"day":this.options.position.start.setTime(new Date(t,e,a).getTime()),this.options.position.end.setTime(new Date(t,e,a+1).getTime());break;case"week":var s,o=new Date(t,e,a);s=1==f(this,"first_day")?o.getDate()-(o.getDay()+6)%7:o.getDate()-o.getDay(),this.options.position.start.setTime(new Date(t,e,s).getTime()),this.options.position.end.setTime(new Date(t,e,s+7).getTime());break;default:$.error(c(this.locale.error_noview,this.options.view))}return this},getTitle:function(){var t=this.options.position.start;switch(this.options.view){case"year":return c(this.locale.title_year,t.getFullYear());case"month":return c(this.locale.title_month,this.locale["m"+t.getMonth()],t.getFullYear());case"week":return c(this.locale.title_week,h(t),t.getFullYear());case"day":return c(this.locale.title_day,this.locale["d"+t.getDay()],t.getDate(),this.locale["m"+t.getMonth()],t.getFullYear())}},isToday:function(){var t=(new Date).getTime();return t>this.options.position.start&&t<this.options.position.end},getStartDate:function(){return this.options.position.start},getEndDate:function(){return this.options.position.end},_loadEvents:function(){var t,e=this,a=null;switch("events_source"in this.options&&""!==this.options.events_source?a=this.options.events_source:"events_url"in this.options&&(a=this.options.events_url,w("The events_url option is DEPRECATED and it will be REMOVED in near future. Please use events_source instead.")),$.type(a)){case"function":t=function(){return a(e.options.position.start,e.options.position.end,g)};break;case"array":t=function(){return[].concat(a)};break;case"string":a.length&&(t=function(){var t=[],i={from:e.options.position.start.getTime(),to:e.options.position.end.getTime()};return g.length&&(i.browser_timezone=g),$.ajax({url:y(a,i),dataType:"json",type:"GET",async:!1}).done((function(e){e.success||$.error(e.error),e.result&&(t=e.result)})),t})}t||$.error(this.locale.error_loadurl),this.options.onBeforeEventsLoad.call(this,(function(){e.options.events=t(),e.options.events.sort((function(t,e){var a;return 0==(a=t.start-e.start)&&(a=t.end-e.end),a})),e.options.onAfterEventsLoad.call(e,e.options.events)}))},_templatePath:function(t){return"function"==typeof this.options.tmpl_path?this.options.tmpl_path(t):this.options.tmpl_path+t+".html"},_loadTemplate:function(t){if(!this.options.templates[t]){var e=this;$.ajax({url:e._templatePath(t),dataType:"html",type:"GET",async:!1,cache:this.options.tmpl_cache}).done((function(a){e.options.templates[t]=(0,o.default)(a,{imports:{each:r.default}})}))}},_update:function(){var t=this;t.context.find("*[data-cal-date]").click((function(){var e=$(this).data("cal-view");t.options.day=$(this).data("cal-date"),t.view(e)})),t.context.find(".cal-cell").dblclick((function(){var e=$("[data-cal-date]",this).data("cal-view");t.options.day=$("[data-cal-date]",this).data("cal-date"),t.view(e)})),this["_update_"+this.options.view]()},_update_day:function(){this.context.find(".cal-day-panel").height(this.context.find(".cal-day-panel-hour").height())},_update_week:function(){},_update_year:function(){this._update_month_year()},_update_month:function(){this._update_month_year();var t=this,e=$(document.createElement("div")).attr("id","cal-week-box"),a=this.options.position.start.getFullYear()+"-"+d(this.options.position.start)+"-";t.context.find(".cal-month-box .cal-before-eventlist").on("mouseenter",(function(){var i=new Date(t.options.position.start),n=$(".cal-cell:first-child .cal-month-day",this),s=n.hasClass("cal-month-first-row")?1:$("[data-cal-date]",n).text();i.setDate(parseInt(s)),s=s<10?"0"+s:s,e.html(c(t.locale.week,h(i))),e.attr("data-cal-week",a+s).show().appendTo(n)})).on("mouseleave",(function(){e.hide()})),e.click((function(){t.options.day=$(this).data("cal-week"),t.view("week")})),$("a.event").mouseenter((function(){t.context.find('a[data-event-id="'+$(this).data("event-id")+'"]').closest(".cal-cell").addClass("day-highlight dh-"+$(this).data("event-class"))})).mouseleave((function(){t.context.find("div.cal-cell").removeClass("day-highlight dh-"+$(this).data("event-class"))}))},_update_month_year:function(){if(this.options.views[this.options.view].slide_events){var t=this,e=$(document.createElement("div")).attr("id","cal-day-tick").html('<i class="icon-chevron-down glyphicon glyphicon-chevron-down"></i>');t.context.find(".cal-month-day, .cal-year-box .cal-cell").on("mouseenter",(function(){0!=$(".events-list",this).length&&$(this).children("[data-cal-date]").text()!=t.activecell&&e.show().appendTo(this)})).on("mouseleave",(function(){e.hide()})).on("click",(function(i){0!=$(".events-list",this).length&&$(this).children("[data-cal-date]").text()!=t.activecell&&D(i,e,a,t)}));var a=$(document.createElement("div")).attr("id","cal-slide-box");a.hide().click((function(t){t.stopPropagation()})),this._loadTemplate("events-list"),e.click((function(e){D(e,$(this),a,t)}))}},getEventsBetween:function(t,e){var a=[];return $.each(this.options.events,(function(){if(null==this.start)return!0;var i=this.end||this.start;parseInt(this.start)<e&&parseInt(i)>=t&&a.push(this)})),a}};function D(t,e,a,i){t.stopPropagation();var n=(e=$(e)).closest(".cal-cell"),s=n.closest(".cal-before-eventlist"),o=n.data("cal-row");e.fadeOut("fast"),a.slideUp("fast",(function(){var t=$(".events-list",n);a.html(i.options.templates["events-list"]({cal:i,events:i.getEventsBetween(parseInt(t.data("cal-start")),parseInt(t.data("cal-end")))})),s.after(a),i.activecell=i.context.find("[data-cal-date]",n).text(),i.context.find(".cal-slide-tick").addClass("tick"+o).show(),a.slideDown("fast",(function(){$("body").one("click",(function(){a.slideUp("fast"),i.activecell=0}))}))}))}n.default.addPlugin("calendar",{width:"100%",view:"month",day:"now",time_start:"06:00",time_end:"22:00",time_split:"30",events_source:"",tmpl_path:"tmpls/",tmpl_cache:!0,classes:{months:{inmonth:"cal-day-inmonth",outmonth:"cal-day-outmonth",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"},week:{workday:"cal-day-workday",saturday:"cal-day-weekend",sunday:"cal-day-weekend",holidays:"cal-day-holiday",today:"cal-day-today"}},views:{year:{slide_events:1,enable:1},month:{slide_events:1,enable:1},week:{enable:1},day:{enable:1}},merge_holidays:!1,onAfterEventsLoad:function(t){},onBeforeEventsLoad:function(t){t()},onAfterViewLoad:function(t){},onAfterModalShown:function(t){},onAfterModalHidden:function(t){},events:[],templates:{year:"",month:"",week:"",day:""},stop_cycling:!1},_)}));
//# sourceMappingURL=/sm/cd1c4b5563c4647164f60c28c3f1aed70e30e4f536d3c443b344db8296e0c316.map